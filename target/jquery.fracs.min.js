(function(g){var c=function(k,j,i,h){this.left=k;this.top=j;this.width=i;this.height=h;this.right=k+i;this.bottom=j+h;this.equals=function(l){return this.left===l.left&&this.top===l.top&&this.width===l.width&&this.height===l.height};this.area=function(){return this.width*this.height};this.intersection=function(p){var r=Math.max(this.left,p.left);var n=Math.min(this.right,p.right);var q=Math.max(this.top,p.top);var m=Math.min(this.bottom,p.bottom);var o=n-r;var l=m-q;if(o<0||l<0){return undefined}return new c(r,q,o,l)}};var f=function(k,i,l,h,j){this.rect=k;this.rectRelative=i;this.visible=l;this.viewport=h;this.possible=j;this.equals=function(m){return this.fracsEqual(m)&&this.rectsEqual(m)};this.fracsEqual=function(m){return this.visible===m.visible&&this.viewport===m.viewport&&this.possible===m.possible};this.rectsEqual=function(m){if(this.rect===undefined&&m.rect===undefined){return true}else{if(this.rect===undefined||m.rect===undefined){return false}}return this.rect.equals(m.rect)&&this.rectRelative.equals(m.rectRelative)}};var a=function(i,j){this.target=i;this.callback=j;this.prevFracs=undefined;var h=this;this.check=function(){var k=e.fracs(e.rect(h.target),e.viewport());if(h.prevFracs===undefined||!h.prevFracs.equals(k)){h.callback.call(h.target,k,h.prevFracs);h.prevFracs=k}}};var d="fracs";var e={viewport:function(){var h=g(window);return new c(h.scrollLeft(),h.scrollTop(),h.width(),h.height())},rect:function(i){var h=g(i);var j=h.offset();return new c(j.left,j.top,h.outerWidth(),h.outerHeight())},fracs:function(l,i){var m=l.intersection(i);if(m===undefined){return new f(undefined,undefined,0,0,0)}var k=new c(m.left-l.left,m.top-l.top,m.width,m.height);var h=m.area();var j=Math.min(l.width,i.width)*Math.min(l.height,i.height);return new f(m,k,1*h/l.area(),1*h/i.area(),1*h/j)},round:function(i,h){if(isNaN(h)||h<=0){return Math.round(i)}return Math.round(i*Math.pow(10,h))/Math.pow(10,h)}};var b={init:function(h){return this.each(function(){var i=new a(this,h);g(this).data(d,i);g(window).bind("scroll",i.check).bind("resize",i.check);i.check()})},destroy:function(){return this.each(function(){var i=g(this);var h=i.data(d);i.removeData(d);g(window).unbind("scroll",h.check).unbind("resize",h.check)})},check:function(){return this.each(function(){var h=g(this).data(d);if(h){h.check()}})},fracs:function(){return e.fracs(e.rect(this.get(0)),e.viewport())},rect:function(){return e.rect(this.get(0))}};g[d]=e;g.fn[d]=function(h){if(b[h]){return b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(h===undefined){return b.fracs.apply(this,arguments)}else{if(h instanceof Function){return b.init.apply(this,arguments)}else{g.error("Method "+h+" does not exist on jQuery."+d)}}}}})(jQuery);