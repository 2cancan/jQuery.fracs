(function(a){a(function(){$body=a("body");$panelFracs=a("#panel .fracs");for(var e=1;e<10;e++){var g=a("<section />").appendTo($body).width(e*300).height(Math.round(Math.random()*600)+100);var c=a("<div class='label'><span class='idx'>#"+e+"</span></div>").appendTo(g);var d=a("<ul />").appendTo(c);d.append(a("<li><span class='info possible' /> of max possible visibility</li>"));d.append(a("<li><span class='info visible' /> visible</li>"));d.append(a("<li><span class='info viewport' /> of viewport</li>"));var j=a("<li>visible rect <span class='info dims' /><ul /></li>").appendTo(d).find("ul");j.append(a("<li>document space <span class='info rect' /></li>"));j.append(a("<li>element space <span class='info rectElementSpace' /></li>"));j.append(a("<li>viewport space <span class='info rectViewportSpace' /></li>"));var h=a("<li />").appendTo($panelFracs);h.append(a("<span class='idx'>"+e+"</span>"));h.append(a("<span class='info possible' /><span class='info visible' /><span class='info viewport' />"));g.data("panel",h)}a("section").fracs(function(l){var k=a(this);var m=k.data("panel");var i=k.find(".label");k.add(m.find(".idx")).css("background-color","rgba(100,200,100,"+l.possible+")");m.find(".visible").text(a.fracs.round(l.visible,4));m.find(".viewport").text(a.fracs.round(l.viewport,4));m.find(".possible").text(a.fracs.round(l.possible,4));m.find(".info").stop(true).css("background-color","rgb(250,250,150)").animate({"background-color":"#fff"},1000);i.find(".visible").text(a.fracs.round(l.visible*100,1)+"%");i.find(".viewport").text(a.fracs.round(l.viewport*100,1)+"%");i.find(".possible").text(a.fracs.round(l.possible*100,1)+"%");if(l.rects===undefined){i.find(".rects").text("undefined")}else{i.find(".dims").text("w/h: "+l.rects.document.width+"x"+l.rects.document.height);i.find(".rect").text("l/t: "+l.rects.document.left+","+l.rects.document.top);i.find(".rectElementSpace").text("l/t: "+l.rects.element.left+","+l.rects.element.top);i.find(".rectViewportSpace").text("l/t: "+l.rects.viewport.left+","+l.rects.viewport.top);i.stop(true).animate({left:l.rects.element.left+"px",top:l.rects.element.top+"px"},100)}});a("section").fracs("check");a("section").eq(5).fracs("unbind").find(".label").empty().append("<span class='idx'>#6</span> (unbound)");a("section").eq(7).fracs(function(i){if(i.possible==1){console.log("#8 max possible visibility")}});var b=a("section");var f=b.eq(3).add(b.eq(4)).add(b.eq(5)).add(b.eq(6)).add(b.eq(7));f.fracs("max","possible",function(i){a("#panel .groups .possible").text(i!==undefined?a(i.element).find(".idx").text():"N/A").stop(true).css("background-color","rgb(250,250,150)").animate({"background-color":"#fff"},1000)});f.fracs("max","visible",function(i){a("#panel .groups .visible").text(i!==undefined?a(i.element).find(".idx").text():"N/A").stop(true).css("background-color","rgb(250,250,150)").animate({"background-color":"#fff"},1000)});f.fracs("max","viewport",function(i){a("#panel .groups .viewport").text(i!==undefined?a(i.element).find(".idx").text():"N/A").stop(true).css("background-color","rgb(250,250,150)").animate({"background-color":"#fff"},1000)})})})(jQuery);